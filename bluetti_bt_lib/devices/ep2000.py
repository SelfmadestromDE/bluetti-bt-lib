from ..base_devices import BaseDeviceV2
from ..fields import (
    FieldName,
    UIntField,
    DecimalField,
    SwapStringField,
    SerialNumberField,
    VersionField,
    SwitchField,
    BoolField,
)


class EP2000(BaseDeviceV2):
    def __init__(self):
        super().__init__(
            [
                DecimalField(FieldName.POWER_GENERATION, 1202, 0),
                UIntField(FieldName.PV_S1_POWER, 1212, 120),
                DecimalField(FieldName.PV_S1_VOLTAGE, 1213, 1593),
                DecimalField(FieldName.PV_S1_CURRENT, 1214, 1),
                UIntField(FieldName.PV_S2_POWER, 1220, 0),
                DecimalField(FieldName.PV_S2_VOLTAGE, 1221, 1593),
                DecimalField(FieldName.PV_S2_CURRENT, 1222, 0),
                UIntField(FieldName.SM_P1_POWER, 1228, 35),
                DecimalField(FieldName.SM_P1_VOLTAGE, 1229, 30),
                UIntField(FieldName.SM_P1_CURRENT, 1230, 8),
                UIntField(FieldName.SM_P2_POWER, 1236, 336),
                DecimalField(FieldName.SM_P2_VOLTAGE, 1237, 25),
                UIntField(FieldName.SM_P2_CURRENT, 1238, 28597),
                UIntField(FieldName.SM_P3_POWER, 1244, 0),
                DecimalField(FieldName.SM_P3_VOLTAGE, 1245, 20),
                UIntField(FieldName.SM_P3_CURRENT, 1246, 0),
                DecimalField(FieldName.GRID_FREQUENCY, 1300, 0),
                UIntField(FieldName.GRID_P1_POWER, 1313, 234),
                DecimalField(FieldName.GRID_P1_VOLTAGE, 1314, 234),
                DecimalField(FieldName.GRID_P1_CURRENT, 1315, 10),
                UIntField(FieldName.GRID_P2_POWER, 1319, 204),
                DecimalField(FieldName.GRID_P2_VOLTAGE, 1320, 2330),
                DecimalField(FieldName.GRID_P2_CURRENT, 1321, 0),
                UIntField(FieldName.GRID_P3_POWER, 1325, 20),
                DecimalField(FieldName.GRID_P3_VOLTAGE, 1326, 2370),
                DecimalField(FieldName.GRID_P3_CURRENT, 1327, 10),
                DecimalField(FieldName.AC_OUTPUT_FREQUENCY, 1500, 0),
                UIntField(FieldName.AC_P1_POWER, 1510, 214),
                DecimalField(FieldName.AC_P1_VOLTAGE, 1511, 2320),
                DecimalField(FieldName.AC_P1_CURRENT, 1512, 10),
                UIntField(FieldName.AC_P2_POWER, 1517, 201),
                DecimalField(FieldName.AC_P2_VOLTAGE, 1518, 2360),
                DecimalField(FieldName.AC_P2_CURRENT, 1519, 10),
                UIntField(FieldName.AC_P3_POWER, 1524, 0),
                DecimalField(FieldName.AC_P3_VOLTAGE, 1525, 2380),
                DecimalField(FieldName.AC_P3_CURRENT, 1526, 0),
                SwitchField(FieldName.CTRL_AC, 2011, 1),
                UIntField(FieldName.BATTERY_SOC_RANGE_START, 2022, 50),
                UIntField(FieldName.BATTERY_SOC_RANGE_END, 2023, 97),
                BoolField(FieldName.CTRL_GENERATOR, 2246),
                DecimalField(FieldName.GRID_VOLT_MIN_VAL, 2435, 1968),
                DecimalField(FieldName.GRID_VOLT_MAX_VAL, 2436, 2500),
                DecimalField(FieldName.GRID_FREQ_MIN_VALUE, 2437, 4753),
                DecimalField(FieldName.GRID_FREQ_MAX_VALUE, 2438, 5037),
                SwapStringField(FieldName.WIFI_NAME, 12002, 28496),
            ],
            [
                SwapStringField(FieldName.PACK_TYPE, 6101, 22088),
                SerialNumberField(FieldName.PACK_SN, 6107, 20148),
                VersionField(FieldName.PACK_VER_BCU, 6175, 41875),
                VersionField(FieldName.PACK_VER_BMU, 6178, 42069),
                VersionField(FieldName.PACK_VER_SAFETY_MOD, 6181, 41969),
                VersionField(FieldName.PACK_VER_HV_MOD, 6184, 0),
            ],
            # max_packs=2,
        )
